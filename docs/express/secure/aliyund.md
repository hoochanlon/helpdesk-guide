# 由云主机被攻击，推断网上黑客有狂二病

阿里云发给我短信，检测到了网上的恶意脚本攻击。扫描到我云主机，并用脚本恶意破坏系统与Ddos攻击的“黑客”。据查为： https://github.com/Tremblae/Tremble 。其实，早在发我短信前，他们安全团队实际上老早知道并分析过这个事了...

![](https://fastly.jsdelivr.net/gh/hoochanlon/Free-NTFS-for-Mac/shashin/zei.png)

<!-- more -->

## 被“黑客”攻击后，对脚本工作原理分析

虽然也不是很懂shell脚本，但我个人理解差不多是这样：

* 写好正则的手法去扫描检测公网云主机
* 通过常用的开放端口，不断用数据字典暴力破解密码，或是其他后门绕开密码，植入脚本
* 用脚本或打包好的二进制程序，卸载系统组件，乱改文件造成系统不稳定，并开放主机其他端口Ddos别人

处理办法：关闭自己不用的桌面系统远程端口，如Windows，3389。“0.0.0.0/0”是任何人都能访问的，自己可临时百度IP，用公网IP登录。设置在“云服务器ECS” -> "ECS安全组"，编辑即可。

阿里云技术支持，考虑到我的需求，加钱的web防火墙、流量云盾，他就没给我推荐了。只是建议我看这两手册：

* 操作系统加固：https://help.aliyun.com/knowledge_list/60787.html
* web应用加固：https://help.aliyun.com/knowledge_list/60792.html


病毒吧B站视频对病毒及杀软的解析：

* [【病毒吧和你聊聊杀毒软件推荐】 ](https://www.bilibili.com/video/BV1q14y1T7XW)
* [【杀毒软件是怎么工作的？病毒吧来告诉你】 ](https://www.bilibili.com/video/BV1zs4y1t7Lv)

最原始的特征码识别来捕获病毒样本，变种太多提取特征码很麻烦。主动防御的启发式识别，如结合以往经验判断，或沙盒模拟环境判定（本地）。云引擎病毒库与人工智能的方式，对特征库存档与学习，并返回用户结果，占用内存什么都很小，缺点极其依赖网络。

## 不开药方，个人对“黑客”的病理诊断

从文件名称规则上与脚本执行功能来看，“ba.sh”、“xz.sh”，似乎这个人学历不怎么高，“Tremble”，爱折腾搞事，并有些自以为是。从公开库来看，不排除私有库存在某些功能限制，这秀技的成分还颇高，这人就是临时创建个GitHub账号来捣蛋的。

总的来说，几种可能性吧：

* 受为KPI的媒体小编所胡吹乱奏的“黑客行为”所影响，觉得很酷、很炫，出人头地。
* 临时账号来看，这不排除就是“深仇大恨”的来恶心下阿里云什么的吧。
* 无聊搞事，报复社会的，个性上有些无的放矢。
* 不排除他是失业者，或是闲着没事做的学生。

另外说个题外话，阿里云技术支持的客服，指导上是不如苹果客服的，颇有“自己先去找百度”去的意味。


